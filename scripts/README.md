# スクリプト

## OGP画像の静的生成

サイト全体のOGP画像（1200×630）を静的PNGとして生成します。本番（Vercel 等）では動的ルートの `readFile` が失敗することがあるため、静的ファイル方式にしています。

```bash
node scripts/generate-ogp-image.mjs
```

- **入力**: `public/images/owl-character.png`（フクロウ画像）
- **出力**: `public/opengraph-image.png`
- 文言やレイアウトを変えたときは再実行してからコミットする。

---

## ユーザーテスト用 Googleフォーム自動作成

`create-user-test-form.gs` を Google Apps Script で実行すると、クラウドワークス募集用のアンケートフォームが一括で作成されます。

### 手順

1. **Google Apps Script を開く**  
   https://script.google.com/ にアクセスし、Googleアカウントでログインする。

2. **新規プロジェクト**  
   「新しいプロジェクト」をクリック。

3. **コードを貼り付け**  
   `create-user-test-form.gs` の内容をすべてコピーし、エディタの `function myFunction() {}` を削除して貼り付ける。

4. **設定を編集（任意）**  
   ファイル先頭の `CONFIG` を編集する。
   - **SITE_URL**: 対象サイトのURL（フォームの説明文に表示される）
   - **AIKOTOBA**: サンクスページに表示する合言葉（クラウドワークス登録用）

5. **実行**  
   関数プルダウンで `createUserTestForm` を選び、「実行」ボタンをクリック。

6. **初回のみ：権限の承認**  
   「権限を確認」→ 使用するGoogleアカウントを選択 → 「許可」で Apps Script がフォームを作成する権限を付与する。

7. **フォームURLを取得**  
   実行後、下部の「実行ログ」に  
   - **公開URL（回答用）**: クラウドワークスや案内に載せるURL  
   - **編集URL**: フォームを編集するためのURL  
   が表示される。必要に応じてブラウザで開いて確認する。

### 作成されるフォームの内容

- **冒頭**: 「サイトを見ていないと判断した場合は、非承認とさせていただきます」の注意書き（フォーム説明文の先頭）
- 説明・同意（チェックボックス・必須）
- 年齢層（ラジオ・必須）
- **各ツール・コンテンツごとのセクション**（22件）：トップページ、ふれあいの丘について、無料ツール一覧、空き家税金シミュレーター、実家じまい力診断、空き家リスク診断、法定相続分シミュレーター、相続準備力診断、デジタル遺品リスク診断、法要カレンダー、資産・査定の目安、チェックリスト、地域別、はじめかた・進め方、費用の目安、処分・捨て方、記事、ガイドブック、専門家への無料相談、資産・査定の見える化、エンディングノート、その他 → 各セクションで「〇〇を利用した感想」（段落・必須）
- 全体を通しての改善提案（段落・必須）

**すべての質問が必須回答**です。送信後の確認メッセージに「合言葉」が表示されます。

### カスタマイズ

- **ツール・コンテンツの追加・削除・順序**: スクリプト内の `CONTENT_ITEMS` 配列を編集する。
- **合言葉を毎回変える**: 実行前に `CONFIG.AIKOTOBA` を変更する。
